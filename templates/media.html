
{% include 'header.html' %}
<h1 class="mt-5">{{ media_item.title }}</h1>
<p>{{ media_item.description }}</p>
    <p><small class="text-muted">Tags: {{ media_item.tags }}</small></p>
<p><small class="text-muted">Category: {{ media_item.category | default('N/A') }}</small></p>
<p><small class="text-muted">Subcategory: {{ media_item.subcategory | default('N/A') }}</small></p>
    <p><small class="text-muted">File Type: {{ media_item.file_type }}</small></p>
<p><small class="text-muted">Upload Date: {{ media_item.upload_date }}</small></p>
<div>
    {% if media_item.file_type == 'image' %}
    <img src="/api/media/{{ media_item.id }}/download" class="img-fluid">
    {% elif media_item.file_type == 'audio' %}
    <audio controls>
        <source src="/api/media/{{ media_item.id }}/download" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    {% elif media_item.file_type == 'video' %}
    <video controls width="100%">
        <source src="/api/media/{{ media_item.id }}/download" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% elif media_item.file_type == 'ebook' %}
        {% if media_item.filename.endswith('.pdf') %}
        <iframe src="/api/media/{{ media_item.id }}/download" width="100%" height="600px" style="border: none;"></iframe>
        {% elif media_item.filename.endswith( ('.docx', '.txt') ) %}
        <p>Document File: Direct viewing not supported. Please <a href="/api/media/{{ media_item.id }}/download">Download {{ media_item.filename }}</a> to view.</p>
        {% else %}
        <p>Ebook File: <a href="/api/media/{{ media_item.id }}/download">Download {{ media_item.filename }}</a></p>
        {% endif %}
    {% else %}
    <p>Unsupported media type for direct viewing. Please <a href="/api/media/{{ media_item.id }}/download">Download {{ media_item.filename }}</a>.</p>
    {% endif %}
</div>
<div class="mt-3">
    <a href="/api/media/{{ media_item.id }}/download" class="btn btn-primary">Download</a>
    <a href="/media/{{ media_item.id }}/edit" class="btn btn-warning">Edit</a>
    <a href="{{ url_for('add_to_playlist_form', media_id=media_item.id) }}" class="btn btn-info">Add to Playlist</a>
    <form action="/media/{{ media_item.id }}/delete" method="post" style="display: inline-block;">
        <button type="submit" class="btn btn-danger">Delete</button>
    </form>
</div>
<a href="/" class="btn btn-secondary mt-3">Back to Library</a>
{% include 'footer.html' %}
